
# Тестовое задание

Приложение, которое позволяет управлять справочной информацией.

В базе предаствлены справочники:  Фабрика, Участки, Оборудование.

Каждая Фабрика (Родитель) имеет  один или несколько Участков (Ребенок).

Каждый Участок  (Родитель)  может содержать один или несколько типов Оборудования (Ребенок) и каждый тип Оборудования может принадлежать одному или нескольким Участкам.  

# Запуск проекта с использованием Docker

## Требования
- Установленный Docker
- Установленный Docker Compose

## Команды для запуска

1. **Клонировать репозиторий**

```bash
git clone https://github.com/av9305999/test_task.git
cd test_task/infra
```
2. **Создать файл .env**

Создайте файл .env внутри папки /infra и добавьте в него необходимые переменные окружения, которые описаны в примере
/infra/.env-example

3. **Собрать и запустить контейнеры**
```docker-compose up --build```

4. **Применить миграции базы данных**
```docker-compose exec test_api alembic upgrade head```

**API**

После того как контейнеры будут запущены и миграции применены, приложение будет доступно через API по адресу:

http://localhost:4000/docs#/

## Базовый URL  

/api/v1/

## Эндпоинты  

### Фабрики (Factories)  

- **Получить список всех фабрик**  

GET /api/v1/factory/

- **Создать фабрику**  

POST /api/v1/factory/

- **Получить информацию о фабрике по ID **

GET /api/v1/factory/{factory_id}/

- **Удалить информацию о фабрике по ID **

DELETE /api/v1/factory/{factory_id}/

### Участок (Sites)  

- **Получить список всех участков**  

GET /api/v1/sites/

- **Создать участок**  

POST /api/v1/sites/

- **Получить информацию об участке по ID **

GET /api/v1/sites/{site_id}/

- **Удалить информацию о участке по ID **

DELETE /api/v1/sites/{site_id}/

- **Добавить оборудование на участок**  

POST /api/v1/sites/{site_id}/set_equipment/

### Оборудование (Equipment)  

- **Получить список всех оборудований**  

GET /api/v1/equipment/

- **Создать оборудование**  

POST /api/v1/equipment/

- **Получить информацию об оборудовании по ID **

GET /api/v1/equipment/{equipment_id}/

- **Удалить информацию об оборудовании по ID **

DELETE /api/v1/equipment/{equipment_id}/

### Иерархия (Hierarchy)  

- Возвращает иерархию для любого типа справочника

GET /api/v1/hierarchy/

### Инициализация (Setup)  

- Заполнить бд искуственными данными

POST /api/v1/setup/
